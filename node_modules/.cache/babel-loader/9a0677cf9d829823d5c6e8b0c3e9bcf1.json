{"ast":null,"code":"var _jsxFileName = \"/Users/alex.vysocki/Desktop/Project/pizza-app/src/CartAdd.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport Context from './context';\nimport productsData from './json/products.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CartAdd = function () {\n  _s();\n\n  let {\n    cart,\n    setCart\n  } = useContext(Context);\n  let cartProduct = [];\n\n  let cartProductJsx = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-item\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-empty-text\",\n      children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 53\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 26\n  }, this);\n\n  const deleteItem = function (event) {\n    const elem = event.target.closest('.cart-item');\n    const itemType = elem.dataset.type;\n    const itemId = elem.dataset.id;\n    const cartObj = JSON.parse(cart);\n    let cartObj2 = JSON.parse(cart);\n\n    if (cartObj[itemType].indexOf(itemId) != -1) {\n      cartObj2 = cartObj2[itemType];\n      cartObj2.forEach((item, index) => {\n        if (item === itemId) {\n          delete cartObj[itemType][index];\n        }\n      });\n      cartObj[itemType] = cartObj[itemType].filter(item => {\n        if (item) return item;\n      });\n      const cartStr = JSON.stringify(cartObj);\n      setCart(cartStr);\n    }\n  };\n\n  const minusItem = function (event) {\n    const elem = event.target.closest('.cart-item');\n    const itemType = elem.dataset.type;\n    const itemId = elem.dataset.id;\n    const cartObj = JSON.parse(cart);\n    const index = cartObj[itemType].indexOf(itemId);\n    cartObj[itemType].splice(index, 1);\n    const cartStr = JSON.stringify(cartObj);\n    setCart(cartStr);\n  };\n\n  const plusItem = function (event) {\n    const elem = event.target.closest('.cart-item');\n    const itemType = elem.dataset.type;\n    const itemId = elem.dataset.id;\n    const cartObj = JSON.parse(cart);\n    const index = cartObj[itemType].indexOf(itemId);\n    cartObj[itemType].push(cartObj[itemType][index]);\n    const cartStr = JSON.stringify(cartObj);\n    setCart(cartStr);\n  };\n\n  if (cart.length === 0) {\n    return cartProductJsx;\n  } else {\n    let cartData = JSON.parse(cart);\n    let keys = Object.keys(cartData);\n    keys.forEach(key => {\n      cartData[key].forEach(indexProduct => {\n        productsData[key]['product' + (+indexProduct + 1)].type = key;\n        productsData[key]['product' + (+indexProduct + 1)].id = indexProduct;\n        cartProduct.push(productsData[key]['product' + (+indexProduct + 1)]);\n      });\n    });\n\n    if (cartProduct.length !== 0) {\n      console.log(cartProduct);\n      const cartProductRendered = [];\n      cartProductJsx = cartProduct.map((item, index) => {\n        let cartObj = JSON.parse(cart);\n        let amount = 0;\n        cartObj[item.type].forEach(cartItem => {\n          if (cartItem === item.id) amount++;\n        });\n        if (amount === 0) amount = 1;\n\n        if (cartProductRendered.indexOf(item.id) == -1) {\n          cartProductRendered.push(item.id);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-item\",\n            \"data-index\": index,\n            \"data-id\": item.id,\n            \"data-type\": item.type,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-image\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.img\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 84\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 53\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-title\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-amount\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"amount-changer\",\n                onClick: minusItem,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 81\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"amount\",\n                children: amount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"amount-changer\",\n                onClick: plusItem,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 80\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-price\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"price-value\",\n                children: parseFloat(item.cost)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 53\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-delete\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"delete-btn\",\n                onClick: deleteItem,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cross\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 103\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 54\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 28\n          }, this);\n        }\n      });\n    }\n\n    return cartProductJsx;\n  }\n};\n\n_s(CartAdd, \"4CA9TBtsemCWkEabeHQ6NfIEaLg=\");\n\n_c = CartAdd;\nexport default CartAdd;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartAdd\");","map":{"version":3,"sources":["/Users/alex.vysocki/Desktop/Project/pizza-app/src/CartAdd.js"],"names":["React","useState","useContext","useEffect","Context","productsData","CartAdd","cart","setCart","cartProduct","cartProductJsx","deleteItem","event","elem","target","closest","itemType","dataset","type","itemId","id","cartObj","JSON","parse","cartObj2","indexOf","forEach","item","index","filter","cartStr","stringify","minusItem","splice","plusItem","push","length","cartData","keys","Object","key","indexProduct","console","log","cartProductRendered","map","amount","cartItem","img","name","parseFloat","cost"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport Context from './context';\n\nimport productsData from './json/products.json';\n\nconst CartAdd = function() {\n\n    let {cart, setCart} = useContext(Context);\n\n    let cartProduct = [];\n    let cartProductJsx = <div className='cart-item'><div className=\"cart-empty-text\">Корзина пуста</div></div>;\n\n    const deleteItem = function (event) {\n\n        const elem = event.target.closest('.cart-item');\n        \n        const itemType = elem.dataset.type;\n        const itemId= elem.dataset.id;\n\n        const cartObj = JSON.parse(cart);\n        let cartObj2 = JSON.parse(cart);\n\n\n        if (cartObj[itemType].indexOf(itemId) != -1) {\n            cartObj2 = cartObj2[itemType];\n\n            cartObj2.forEach((item, index) => {\n                if (item === itemId) {\n                    delete cartObj[itemType][index]\n                }\n            });\n\n            cartObj[itemType] = cartObj[itemType].filter(item => {\n                if (item) return item;\n            });\n\n            const cartStr = JSON.stringify(cartObj);\n\n            setCart(cartStr);\n        }\n    };\n    \n    const minusItem = function (event) {\n        const elem = event.target.closest('.cart-item');\n        \n        const itemType = elem.dataset.type;\n        const itemId= elem.dataset.id;\n\n        const cartObj = JSON.parse(cart);\n\n        const index = cartObj[itemType].indexOf(itemId);\n\n        cartObj[itemType].splice(index, 1);\n\n        const cartStr = JSON.stringify(cartObj);\n\n        setCart(cartStr);\n\n    };\n\n    const plusItem = function (event) {\n        const elem = event.target.closest('.cart-item');\n        \n        const itemType = elem.dataset.type;\n        const itemId= elem.dataset.id;\n\n        const cartObj = JSON.parse(cart);\n\n        const index = cartObj[itemType].indexOf(itemId);\n\n        cartObj[itemType].push(cartObj[itemType][index]);\n\n        const cartStr = JSON.stringify(cartObj);\n\n        setCart(cartStr);\n\n    };\n\n    if (cart.length === 0) {\n        return cartProductJsx;\n    } else {\n        let cartData = JSON.parse(cart);\n\n        let keys = Object.keys(cartData)\n\n\n        keys.forEach(key => {\n            cartData[key].forEach(indexProduct => {\n                productsData[key]['product' + (+indexProduct + 1)].type = key;\n                productsData[key]['product' + (+indexProduct + 1)].id = indexProduct;\n                cartProduct.push(productsData[key]['product' + (+indexProduct + 1)])\n            });\n        });\n\n\n        if (cartProduct.length !== 0) {\n\n            console.log(cartProduct)\n\n            const cartProductRendered = [];\n           \n            cartProductJsx = cartProduct.map((item, index) => {\n\n                let cartObj = JSON.parse(cart);\n                let amount = 0;\n\n                cartObj[item.type].forEach(cartItem => {\n                    if (cartItem === item.id) amount++;\n                })\n\n                if(amount === 0) amount = 1;\n\n                if (cartProductRendered.indexOf(item.id) == -1) {\n                    cartProductRendered.push(item.id)\n                    return <div className=\"cart-item\" key={index} data-index={index} data-id={item.id} data-type={item.type}>\n                        <div className=\"item-image\"><div className='image-wrapper'><img src={item.img}></img></div></div>\n                        <div className=\"item-title\">{item.name}</div>\n                        <div className=\"item-amount\">\n                            <div className=\"amount-changer\" onClick={minusItem}><span>-</span></div>\n                            <div className=\"amount\">{amount}</div>\n                            <div className=\"amount-changer\" onClick={plusItem}><span>+</span></div>\n                        </div>\n                        <div className=\"item-price\"><span className=\"price-value\">{parseFloat(item.cost)}</span></div>\n                        <div className=\"item-delete\"><div className=\"delete-btn\" onClick={deleteItem}><div className=\"cross\"></div></div></div>\n                    </div>\n                }\n\n            })\n\n        }\n\n        return cartProductJsx;\n    }\n};\n\nexport default CartAdd;"]},"metadata":{},"sourceType":"module"}